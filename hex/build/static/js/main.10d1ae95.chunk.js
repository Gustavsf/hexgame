(this["webpackJsonpassigment-hex2048"]=this["webpackJsonpassigment-hex2048"]||[]).push([[0],{10:function(t,e,i){},12:function(t,e,i){"use strict";i.r(e);var s,a=i(3),o=i.n(a),n=(i(10),i(4)),r=i(5),h=i(0),u=function(){function t(e,i){Object(n.a)(this,t),this.x=0,this.y=0,this.xOffSet=53,this.yOffSet=90,this.marginTop=100*this.radius,this.radius=e,this.hostname=i}return Object(r.a)(t,[{key:"start",value:function(){this.getHexConfig(),this.getOffSetConfig(),this.getHexArray(),this.radius>=4&&(document.body.style.zoom=.8),this.fetchR([])}},{key:"getHexArr",value:function(){return this.hexDivArray}},{key:"getHexConfig",value:function(){for(var t=[],e=0;e<2*this.radius-1;e++)e<this.radius?t.push(this.radius+e):t.push(t[e-1]-1);this.hexConfig=t}},{key:"getOffSetConfig",value:function(){for(var t,e,i=[],s=[],a=0;a<this.hexConfig.length;a++)0===a?(i.push(0,0),s.push(0,0)):this.hexConfig[a]-this.hexConfig[a-1]>0?(t=s[0]+this.xOffSet,e=s[1]+this.yOffSet,i.push(t,e),(s=[]).push(t,e)):(t=s[0]+2*this.xOffSet,e=s[1],i.push(t,e),(s=[]).push(t,e));this.offSetConfig=i}},{key:"getHexArray",value:function(){for(var t=[],e=1,i=0,s=this.hexConfig.length,a=this.radius-1,o=0;o<s;o++){var n=0,r=1-this.radius;0!==o&&(n=o<(s+1)/2?o:this.radius-1,o>=this.radius&&(r=-(s-o-1))),this.x=this.offSetConfig[e-1],this.y=this.offSetConfig[e];for(var u=0;u<this.hexConfig[o];u++)this.x=this.x+this.xOffSet,this.y=this.y-this.yOffSet,t.push(Object(h.jsx)("div",{className:"hexagon","data-x":n,"data-y":r,"data-z":a,"data-value":"",id:i,style:{transform:"translate("+this.x+"px, "+this.y+"px)",position:"absolute"}},i)),n-=1,r+=1,i++;a--,e+=2}this.hexDivArray=t}},{key:"getArrayString",value:function(t){var e="";for(var i in t)e=e+t[i].x+t[i].y+t[i].z+t[i].value;return e}},{key:"setAtr",value:function(t,e,i,s){var a,o=!1;"bot"===i&&t.reverse();for(var n=!0,r=0;r<this.hexConfig[e];r++){var h=document.getElementById(t[this.hexConfig[e]-1-r]),u=h.getAttribute("data-value");0==u&&n?(a=h,n=!1,o=!0):0==u||n||(!0===s&&(a.setAttribute("data-value",u),h.setAttribute("data-value","")),n=!0)}return o}},{key:"combine",value:function(t,e,i,s){var a,o=!1;"bot"===i&&t.reverse();for(var n=!0,r=0;r<this.hexConfig[e];r++){var h=document.getElementById(t[this.hexConfig[e]-1-r]),u=h.getAttribute("data-value");0!=u&&n?(a=h,n=!1):0==u||n||(u==a.getAttribute("data-value")&&(!0===s&&(a.setAttribute("data-value",2*u),h.setAttribute("data-value","")),o=!0,n=!0),a=h)}return o}},{key:"moveHex",value:function(t,e){for(var i=document.getElementsByClassName("hexagon"),s=[],a=0,o=1-this.radius,n=0;n<this.hexConfig.length;n++){for(var r=0;r<i.length;r++){var h=i[r].getAttribute("data-x"),u=i[r].getAttribute("data-y"),g=i[r].getAttribute("data-z"),l=i[r].getAttribute("id");"top"===t&&h==o&&(s.push(l),s.length===this.hexConfig[a]&&("combine"===e?this.combine(s,a,"top",!0):this.setAtr(s,a,"top",!0),a++,s=[])),"topR"===t&&u==-o&&(s.push(l),s.length===this.hexConfig[a]&&("combine"===e?this.combine(s,a,"top",!0):this.setAtr(s,a,"top",!0),a++,s=[])),"topL"===t&&g==o&&(s.push(l),s.length===this.hexConfig[a]&&("combine"===e?this.combine(s,a,"top",!0):this.setAtr(s,a,"top",!0),a++,s=[])),"bot"===t&&h==-o&&(s.push(l),s.length===this.hexConfig[a]&&("combine"===e?this.combine(s,a,"bot",!0):this.setAtr(s,a,"bot",!0),a++,s=[])),"botR"===t&&g==-o&&(s.push(l),s.length===this.hexConfig[a]&&("combine"===e?this.combine(s,a,"bot",!0):this.setAtr(s,a,"bot",!0),a++,s=[])),"botL"===t&&u==o&&(s.push(l),s.length===this.hexConfig[a]&&("combine"===e?this.combine(s,a,"bot",!0):this.setAtr(s,a,"bot",!0),a++,s=[]))}o++}}},{key:"getHexCells",value:function(){for(var t,e=document.getElementsByClassName("hexagon"),i=[],s=0;s<e.length;s++){var a=parseInt(e[s].getAttribute("data-x")),o=parseInt(e[s].getAttribute("data-y")),n=parseInt(e[s].getAttribute("data-z"));if(0!==(t=e[s].getAttribute("data-value")?parseInt(e[s].getAttribute("data-value")):0)){var r={x:a,y:o,z:n,value:t};i.push(r)}}return i}},{key:"fullMove",value:function(t){for(var e=this.getArrayString(this.getHexCells()),i=0;i<this.radius;i++)this.moveHex(t,"shift");this.moveHex(t,"combine"),this.moveHex(t,"shift"),e!==this.getArrayString(this.getHexCells())?(this.removeAnimation(),this.fetchR(this.getHexCells())):this.checkGameOver(),this.addColor()}},{key:"checkGameOver",value:function(){for(var t=["top","topR","topL","bot","botR","botL"],e=document.getElementsByClassName("hexagon"),i=[],s=!1,a=0;a<t.length;a++)for(var o=t[a],n=1-this.radius,r=0,h=0;h<this.hexConfig.length;h++){for(var u=0;u<e.length;u++){var g=e[u].getAttribute("data-x"),l=e[u].getAttribute("data-y"),f=e[u].getAttribute("data-z"),c=e[u].getAttribute("id");"top"===o&&g==n&&0==s&&(i.push(c),i.length===this.hexConfig[r]&&(this.combine(i,r,"top",!1)&&(s=!0),this.setAtr(i,r,"top",!1)&&(s=!0),r++,i=[])),"topR"===o&&l==-n&&0==s&&(i.push(c),i.length===this.hexConfig[r]&&(this.combine(i,r,"top",!1)&&(s=!0),this.setAtr(i,r,"top",!1)&&(s=!0),r++,i=[])),"topL"===o&&f==n&&0==s&&(i.push(c),i.length===this.hexConfig[r]&&(this.combine(i,r,"top",!1)&&(s=!0),this.setAtr(i,r,"top",!1)&&(s=!0),r++,i=[])),"bot"===o&&g==-n&&0==s&&(i.push(c),i.length===this.hexConfig[r]&&(this.combine(i,r,"bot",!1)&&(s=!0),this.setAtr(i,r,"bot",!1)&&(s=!0),r++,i=[])),"botR"===o&&f==-n&&0==s&&(i.push(c),i.length===this.hexConfig[r]&&(this.combine(i,r,"bot",!1)&&(s=!0),this.setAtr(i,r,"bot",!1)&&(s=!0),r++,i=[])),"botL"===o&&l==n&&0==s&&(i.push(c),i.length===this.hexConfig[r]&&(this.combine(i,r,"bot",!1)&&(s=!0),this.setAtr(i,r,"bot",!1)&&(s=!0),r++,i=[]))}n++}return s||(document.getElementById("data-status").innerHTML="Game-over",document.getElementById("data-status").setAttribute("data-status","game-over")),s}},{key:"removeAnimation",value:function(){for(var t=document.getElementsByClassName("hexagon"),e=0;e<t.length;e++)t[e].classList.remove("appear")}},{key:"addColor",value:function(){for(var t=document.getElementsByClassName("hexagon"),e=0;e<t.length;e++){var i=t[e].getAttribute("data-value");0==i&&(t[e].style.background="rgb(0,250,255)"),"2"===i&&(t[e].style.background="rgb(0,220,255)"),"4"===i&&(t[e].style.background="rgb(0,184,255)"),"8"===i&&(t[e].style.background="rgb(0,154,255)"),"16"===i&&(t[e].style.background="rgb(0,30,255)"),"32"===i&&(t[e].style.background="rgb(0,5,255)"),"64"===i&&(t[e].style.background="rgb(189,0,255)"),"128"===i&&(t[e].style.background="rgb(214,0,255)"),parseInt(i)>128&&(t[e].style.background="rgb(170,0,255)")}}},{key:"fetchR",value:function(t){var e=this,i=document.getElementsByClassName("hexagon"),s="https://"+this.hostname+"/"+this.radius;fetch(s,{method:"POST",body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){for(var s=0;s<t.length;s++){for(var a=t[s].x,o=t[s].y,n=t[s].z,r=t[s].value,h=0;h<i.length;h++)a==i[h].getAttribute("data-x")&&o==i[h].getAttribute("data-y")&&n==i[h].getAttribute("data-z")&&(i[h].classList.add("appear"),i[h].setAttribute("data-value",r),i[h].style.backgroundColor=2==r?"rgb(0,220,255)":"rgb(0,184,255)");e.checkGameOver()}}))}}]),t}();""==window.location.href.split("/",4)[3]?(s=new URLSearchParams("?hostname=hex2048szb9jquj-hex15.functions.fnc.fr-par.scw.cloud&radius=2"),window.history.replaceState({},"","?hostname=hex2048szb9jquj-hex15.functions.fnc.fr-par.scw.cloud&radius=2")):s=new URLSearchParams(window.location.search);var g=Object.fromEntries(s.entries()),l=parseInt(g.radius),f=g.hostname;console.log(f);var c=new u(l,f);c.start();var b=c.getHexArr(),d=!0;document.addEventListener("keydown",(function(t){switch(t.keyCode){case 87:d&&(c.fullMove("top"),d=!1,setTimeout((function(){d=!0}),350));break;case 69:d&&(c.fullMove("topR"),setTimeout((function(){d=!0}),350));break;case 81:d&&(c.fullMove("topL"),d=!1,setTimeout((function(){d=!0}),350));break;case 83:d&&(c.fullMove("bot"),d=!1,setTimeout((function(){d=!0}),350));break;case 68:d&&(c.fullMove("botR"),d=!1,setTimeout((function(){d=!0}),350));break;case 65:d&&(c.fullMove("botL"),d=!1,setTimeout((function(){d=!0}),350))}}));var v=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{id:"gameView",style:{marginTop:120*l},children:[b.map((function(t){return t})),Object(h.jsxs)("div",{id:"gameStatus",children:["Game Status: ",Object(h.jsx)("span",{id:"data-status","data-status":"playing",children:"playing"})]})]})})};o.a.render(Object(h.jsx)(v,{}),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.10d1ae95.chunk.js.map